#!/usr/bin/env coffee

grunt        = require('grunt')
{type, name} = {type: process.argv[2],name: process.argv[3]}
exec         = require('child_process').exec

printHelp = ->
  console.log 'Usage: `emberpods init` or `emberpods component|pod|model <filename>`'

if process.argv.length is 3
  switch type
    when 'init'
      exec('npm install grunt && cp ./bin/ember-pods/blueprint ./')
    else
      console.log 'Unknown command.'
      printHelp()

else if process.argv.length 4
  switch type
    when 'pod'
      grunt.tasks(['generate:pod'], {name:name})

    when 'component'
      grunt.tasks(['generate:component'], {name:name})

    when 'model'
      grunt.tasks(['generate:model'], {name:name})

    when 'helper'
      grunt.tasks(['generate:helper'], {name:name})

    else
      console.log 'Unknown command.'
      printHelp()
else
  console.log 'Incorrect number of parameters provided.'
  printHelp()
